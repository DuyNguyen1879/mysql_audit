<div class="row">
    <div class="col-md-9">
        <textarea id="sql_value" name="sql_value" class="form-control" placeholder="请在此提交SQL，请以分号结尾。例如：use test; create table t1(id int)engine=innodb;" rows=21 required></textarea>
    </div>
    <div class="col-md-3">
        <select id="host_id" name="host_id" class="selectpicker show-tick form-control bs-select-hidden" required>
            <option value="0" disabled selected style="color: black">请选择要审核的集群:</option>
            {% for info in host_infos %}
                <option value="{{ info.host_id }}">{{ info.host_name }}</option>
            {% endfor %}
        </select>
    </div>
</div>
</br>
<div class="row">
    <div class="col-md-8">
        <button class="btn btn-primary" onclick="get_audit_infos()">执行SQL审核</button>
        &nbsp;&nbsp;
        <button class="btn btn-default" type="reset">清空</button>
    </div>
</div>
</br>
<div class="row">
    <div class="col-md-12" id="audit_info">

    </div>
</div>

<script type="text/javascript">
    $(".selectpicker").selectpicker({liveSearch: true});

    function get_audit_infos() {
        var sql = $("#sql_value").val();
        var host_id =$("#host_id").val();
        if (host_id <= 0) {
            $("#audit_info").html("请选择数据库集群");
            return;
        }
        if (sql.length <= 0) {
            $("#audit_info").html("请输入要审核的SQL");
            return;
        }
        input_data_for_post_loding("/audit/check", "sql=" + sql + "&host_id=" + host_id, "#audit_info");
    }
</script>

<script src={{ url_for("static", filename="js/common.js") }} type="text/javascript"></script>